{% extends 'layout.html' %}

{% load static %}

{% block content %}
    <div class="container">
        <div class="row">
            
            <div class="col-md-1">
            </div>

            <div class="col-md-10">

                <div class="carousel slide" id="carouselSite" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        <!--A Imagem sendo adicionada-->
                        <div class="carousel-item active">
                            <img 
                            	src="{% static 'img/house_preview_1_detail.png' %}" 
                            	class="img-fluid d-block imgSlide"
                                width="1000" 
                                height="600"
                            >
                            <div class="carousel-caption d-md-block destaque" >
                                <!--O Texto que acompanha a imagem-->
                                <div class="slideInfo">
                                    <h3 class="h3Slide">
                                    Casa com {{house.numero_de_divisoes}} divisões
                                	</h3>
                                </div>
                            </div>
                        </div>
                        {% for picture in house.pictures.all %}
                        <div class="carousel-item">
                            <img 
                                src="{{picture.picture.url}}" 
                                class="img-fluid d-block imgSlide" 
                                width="1000" 
                                height="600" 
                            >
                            <div class="carousel-caption d-md-block destaque" >
                                <!--O Texto que acompanha a imagem-->
                                <div class="slideInfo">
                                    <h3 class="h3Slide">
                                        {{picture.descriçao}}
                                    </h3>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                        <div class="carousel-item">
                            <img 
                            	src="{% static 'img/house_preview_2_detail.png' %}" 
                            	class="img-fluid d-block imgSlide"
                                width="1000" 
                                height="600"
                            >

                            <div class="carousel-caption d-md-block" >
                                <!--O Texto que acompanha a imagem-->
                                <div class="slideInfo">
                                   	<h3 class="h3Slide">
                                        Renda {{house.preço}} MZN
                                    </h3>
                                    <h5 class="h4Slide">
                                        Ligue: {{house.contacto_principal}}
                                        {% if house.contacto_secúndario %}
                                             ou {{house.contacto_secúndario}}
                                        {% endif %}
                                    </h5>
                                </div>
                            </div>
                        </div>

                        <div class="carousel-control">
                            <a 
                                href="#carouselSite" 
                                class="carousel-control-prev" 
                                role="button"
                                data-bs-target=""  
                                data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon"></span>
                                    <span class="sr-only">Anterior</span>
                            </a>

                            <a 
                                href="#carouselSite" 
                                class="carousel-control-next" 
                                role="button"  
                                data-bs-slide="next">
                                    <span class="sr-only">Proximo</span>
                                    <span class="carousel-control-next-icon"></span>
                            </a>
                        </div>

                    </div>
            </div>

            <a 
                class="mt-2 mb-2    " 
                data-bs-toggle="collapse" 
                href="#collapseExample" 
                role="button" 
                aria-expanded="false" 
                aria-controls="collapseExample">
                    <h3>Detalhes</h3>
            </a>

            <div class="collapse" style="margin-left: 20px;" id="collapseExample">
                <div class="row">
                    <div class="col-md-8">
                        <table class="table table-striped">
                            <tr>
                                <td><p class="descricao">Nome do Proprietário: </p></td>
                                <td><p class="descricao">{{house.nome_do_proprietario}} {{house.sobrenome_do_proprietario}}</p></td>
                            </tr>
                            <tr>
                                <td><p class="descricao">Contacto:</p></td>
                                <td>
                                    <p class="descricao">
                                        {{house.contacto_principal}}
                                        {% if house.contacto_secúndario %}
                                            ou {{house.contacto_secúndario}}
                                        {% endif %}
                                    </p>
                                </td>
                            </tr>
                            <tr>
                                <td><p class="descricao strong">Localização da Residência:</p></td>
                                <td><p class="descricao">{{house.bairro}}, {% if house.distrito%}{{house.distrito}} - {% endif %}{{house.cidade}}</p></td>
                            </tr>
                            <tr>
                                <td><p class="descricao">Número de Divisões:</p></td>
                                <td><p class="descricao">{{house.numero_de_divisoes}}</p></td>
                            </tr>
                            <tr>
                                <td><p class="descricao">Vedada:</p></td>
                                <td><p class="descricao">{{house.vedada}}</p></td>
                            </tr>
                            <tr>
                                <td><p class="descricao">Mobiliada:</p></td>
                                <td><p class="descricao">{{house.mobiliada}}</p></td>
                            </tr>
                            <tr>
                                <td><p class="descricao">Renda:</p></td>
                                <td><p class="descricao">{{house.preço}} Mts</p></td>
                            </tr>
                            <tr>
                                <td><p class="descricao">Entrada:</p></td>
                                <td><p class="descricao">{{house.meses_adiantados}} Meses</p></td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>

            <a href="{% url 'house_list' %}" class="btn btn-secondary">Voltar</a>
            {% if user == house.create_by_user %}
            <a href="{% url 'house_update' house.pk %}" class="btn btn-outline-primary">Alterar</a>
            <a href="{% url 'house_toggle_visibility' house.pk %}" class="btn btn-outline-success">
                {% if house.mostrar_na_lista %}Ocultar{% else %}Publicar{% endif %}
            </a>
            <a href="{% url 'house_upload_picture' house.pk %}" class="btn btn-outline-warning">Imagens</a>
            <a href="{% url 'house_delete' house.pk %}" class="btn btn-outline-danger">Apagar</a>

            {% endif %}

    </div>
{% endblock content %}
